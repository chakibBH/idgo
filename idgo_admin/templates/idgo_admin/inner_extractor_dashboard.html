{% load static %}
{% load bootstrap3 %}

{% include "idgo_admin/alert_messages.html" %}

<div>
	<div id="table-async-extractor-task" class="table-responsive">
		<table id="table-async-extractor-task" class="table table-striped table-bordered table-hover table-condensed">
			<tr>
				<th>État</th>
				<th>Jeu de données</th>
				<th>Ressource</th>
				<th>Date de la demande</th>
				<th>Date de début du traitement</th>
				<th>Date de fin de traitement</th>
				<th>Temps écoulé</th>
			</tr>
			{% for task in tasks %}
			<tr id="{{ task.uuid }}">
				<td>{{ task.status }}</td>
				<td>{{ task.layer.resource.dataset.name }}</td>
				<td>{{ task.layer.resource.name }}</td>
				<td>{{ task.submission_datetime }}</td>
				<td>{{ task.start_datetime }}</td>
				<td>{{ task.stop_datetime }}</td>
				<td>{{ task.elapsed_time }}</td>
			</tr>
			{% endfor %}
		<table>
	</div>
	<nav aria-label="Page navigation" style="text-align: center;">
		<ul id="table-alldatasets-paginator" class="pagination pagination-sm"></ul>
	</nav>
	<div class="buttons-on-the-right-side">
		<button name="revoke" class="btn btn-default">Révoquer</button>
	</div>
</div>

<script>
(function() {
	const editableGrid = new EditableGrid('AsynchronousExtractorTasks');
	editableGrid.load({
		metadata: [{
			name: 'État',
			datatype: 'string',
			editable: false
		}, {
			name: 'Date de la demande',
			datatype: 'date',
			editable: false
		}, {
			name: 'Date de fin de traitement',
			datatype: 'date',
			editable: false
		}, {
			name: 'Temps écoulé',
			datatype: 'string',
			editable: false
		}]
	});
	editableGrid.attachToHTMLTable('asynchronous-extractor-tasks');
	editableGrid.renderGrid();
});
</script>
